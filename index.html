<!DOCTYPE html>
<html lang="en"> 
<head>
    <title>Chess</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <meta charset="UTF-8" content-type="utf-8" name="viewport">
    <style>
        .chess-board {
            border-spacing: 0;
            border-collapse: collapse;
        }

        .chess-board th {
            padding: .5em;
        }

        .chess-board th+th {
            border-bottom: 1px solid #000;
        }

        .chess-board th:first-child,
        .chess-board td:last-child {
            border-right: 1px solid #000;
        }

        .chess-board tr:last-child td {
            border-bottom: 1px solid;
        }

        .chess-board th:empty {
            border: none;
        }

        .chess-board td {
            width: 2em;
            height: 2em;
            text-align: center;
            font-size: 32px;
            line-height: 0;
        }

        .chess-board .light {
            background: #eee;
        }

        .chess-board .dark {
            background: #aaa;
        }
    </style>
</head>

<body>
    <main>
        <!--
            (c) Tom Eccleston 2022
            Use of this code without permission is punishable BY DEATH! ;)
        -->
        <!-- The game -->
        <!-- A table to make the board -->
        <table class="chess-board">
            <tbody>
                <th> </th>
                <th>a</th>
                <th>b</th>
                <th>c</th>
                <th>d</th>
                <th>e</th>
                <th>f</th>
                <th>g</th>
                <th>h</th>
                <tr value="8">
                    <th>8</th>
                    <td class="light" value="A8" id="black-piece-castle1">♜</td>
                    <td class="dark" value="B8" id="black-piece-knight1">♞</td>
                    <td class="light" value="C8" id="black-piece-bishop1">♝</td>
                    <td class="dark" value="D8" id="black-piece-queen">♛</td>
                    <td class="light" value="E8" id="black-piece-king">♚</td>
                    <td class="dark" value="F8" id="black-piece-bishop2">♝</td>
                    <td class="light" value="G8" id="black-piece-knight2">♞</td>
                    <td class="dark" value="H8" id="black-piece-castle2">♜</td>
                </tr>
                <tr value="7">
                    <th>7</th>
                    <td class="dark" value="A7" id="black-piece-pawn1">♟</td>
                    <td class="light" value="B7" id="black-piece-pawn2">♟</td>
                    <td class="dark" value="C7" id="black-piece-pawn3">♟</td>
                    <td class="light" value="D7" id="black-piece-pawn4">♟</td>
                    <td class="dark" value="E7" id="black-piece-pawn5">♟</td>
                    <td class="light" value="F7" id="black-piece-pawn6">♟</td>
                    <td class="dark" value="G7" id="black-piece-pawn7">♟</td>
                    <td class="light" value="H7" id="black-piece-pawn8">♟</td>
                </tr>
                <tr value="6">
                    <th>6</th>
                    <td class="light" value="A6" id="cell"></td>
                    <td class="dark" value="B6" id="cell"></td>
                    <td class="light" value="C6" id="cell"></td>
                    <td class="dark" value="D6" id="cell"></td>
                    <td class="light" value="E6" id="cell"></td>
                    <td class="dark" value="F6" id="cell"></td>
                    <td class="light" value="G6" id="cell"></td>
                    <td class="dark" value="H6" id="cell"></td>
                </tr>
                <tr value="5">
                    <th>5</th>
                    <td class="dark" value="A5" id="cell"></td>
                    <td class="light" value="B5" id="cell"></td>
                    <td class="dark" value="C5" id="cell"></td>
                    <td class="light" value="D5" id="cell"></td>
                    <td class="dark" value="E5" id="cell"></td>
                    <td class="light" value="F5" id="cell"></td>
                    <td class="dark" value="G5" id="cell"></td>
                    <td class="light" value="H5" id="cell"></td>
                </tr>
                <tr value="4">
                    <th>4</th>
                    <td class="light" value="A4" id="cell"></td>
                    <td class="dark" value="B4" id="cell"></td>
                    <td class="light" value="C4" id="cell"></td>
                    <td class="dark" value="D4" id="cell"></td>
                    <td class="light" value="E4" id="cell"></td>
                    <td class="dark" value="F4" id="cell"></td>
                    <td class="light" value="G4" id="cell"></td>
                    <td class="dark" value="H4" id="cell"></td>
                </tr>
                <tr value="3">
                    <th>3</th>
                    <td class="dark" value="A3" id="cell"></td>
                    <td class="light" value="B3" id="cell"></td>
                    <td class="dark" value="C3" id="cell"></td>
                    <td class="light" value="D3" id="cell"></td>
                    <td class="dark" value="E3" id="cell"></td>
                    <td class="light" value="F3" id="cell"></td>
                    <td class="dark" value="G3" id="cell"></td>
                    <td class="light" value="H3" id="cell"></td>
                </tr>
                <tr value="2">
                    <th>2</th>
                    <td class="light" value="A2" id="white-piece-pawn1">♙</td>
                    <td class="dark" value="B2" id="white-piece-pawn2">♙</td>
                    <td class="light" value="C2" id="white-piece-pawn3">♙</td>
                    <td class="dark" value="D2" id="white-piece-pawn4">♙</td>
                    <td class="light" value="E2" id="white-piece-pawn5">♙</td>
                    <td class="dark" value="F2" id="white-piece-pawn6">♙</td>
                    <td class="light" value="G2" id="white-piece-pawn7">♙</td>
                    <td class="dark" value="H2" id="white-piece-pawn8">♙</td>
                </tr>
                <tr value="1">
                    <th>1</th>
                    <td class="dark" value="A1" id="white-piece-castle1">♖</td>
                    <td class="light" value="B1" id="white-piece-knight1">♘</td>
                    <td class="dark" value="C1" id="white-piece-bishop1">♗</td>
                    <td class="light" value="D1" id="white-piece-queen">♕</td>
                    <td class="dark" value="E1" id="white-piece-king">♔</td>
                    <td class="light" value="F1" id="white-piece-bishop2">♗</td>
                    <td class="dark" value="G1" id="white-piece-knight2">♘</td>
                    <td class="light" value="H1" id="white-piece-castle2">♖</td>
                </tr>
            </tbody>
        </table>
    </main>
    <footer>
        <h3>About this game</h3>
        <blockquote>
            <p>This website was made with HTML, CSS, Javascript, and JQuery</p>
        </blockquote>
    </footer>
    <script type="text/javascript">

        // black turn ai
        while (whiteTurn === false && blackTurn === true) {

        }

        //white turn game mechanics
        //starting values
        var whiteTurn = true;
        var blackTurn = false;

        var arrMovedWhitePawnList = [];
        var arrMovedBlackPawnList = [];

        var arrMovedWhiteBishopList = [];
        var arrMovedBlackBishopList = [];

        var arrMovedWhiteKnightList = [];
        var arrMovedBlackKnightList = [];

        var arrMovedBlackCastleList = [];
        var arrMovedWhiteCastleList = [];

        var blackQueen = null;
        var whiteQueen = null;

        var blackKing = null;
        var whiteKing = null;

        var selectedPiece = null;
        var moveToSquare = null;
        var movePiece = null;


        //white turn mechanic
        while (whiteTurn === true && blackTurn === false) {
            //Jquery function to get x,y coordinates of click and find type of cell
            $(document).on("click", function (event) {
                var x = event.pageX;
                var y = event.pageY;
                var clickedElement = document.elementFromPoint(x, y);
                var value = $(clickedElement).attr('value');
                var id = $(clickedElement).attr('id');
                var color = $(clickedElement).attr('class');

                if (id !== undefined && selectedPiece === null && id.includes('piece')) { //selects piece
                    console.log('piece');
                    selectedPiece = id; 
                    enlargeBackground()
                    const pieceId = id;
                    const pieceValue = value;
                    const pieceColor = color;
                    console.log(pieceColor);
                    console.log(pieceId);
                    console.log(pieceValue);
                }

                else if (id !== undefined && moveToSquare === null && id.includes('cell')) { // selects empty cell
                    console.log('blank');
                    moveToSquare = value;
                    movePiece = id;
                    console.log(value)
                    move();
                    const spaceId = id;
                    const spaceValue = value;
                    const spaceColor = color;
                    console.log(spaceColor);
                    console.log(spaceId);
                    console.log(spaceValue);
                }
                    

            })

            function enlargeBackground() {
                $(selectedPiece).parent('td').css("width", "2.5em")
                $(selectedPiece).parent('td').css("height", "2.5em")
            }

            function move(spaceColor, spaceId, spaceValue,pieceValue, pieceColor, pieceId) {
                if (selectedPiece.includes('castle')) {
                     console.log(movePiece)
                     var textContentPiece = "♖";
                     updateCellWhite()                   
                }
                else if (selectedPiece.includes('knight')) {
                     console.log(movePiece)
                     var textContentPiece = "♘";
                     updateCellWhite()              
                }
                else if (selectedPiece.includes('bishop')) {
                    console.log(movePiece)
                     var textContentPiece = "♗";
                     updateCellWhite()                  
                                     
                }
                else if (selectedPiece.includes('pawn')) {
                     console.log(movePiece)
                     var textContentPiece = "♙";
                     updateCellWhite()                                
                }   
        
                else if (selectedPiece.includes('queen')) {
                     console.log(movePiece)
                     var textContentPiece = "♕";
                     updateCellWhite()               
                                          
                }     
                else if (selectedPiece.includes('king')) {
                     console.log(movePiece)
                     var textContentPiece = "♔";
                     updateCellWhite()
                            
                }        
                else {
                    console.log('error');
                }
                
                             
            }

            function updateCellWhite(spaceColor, spaceId, spaceValue,pieceValue, pieceColor, pieceId, textContentPiece) {
                document.getElementById(`${movePiece}`).innerHTML = `<td class='${spaceColor}' id='${spaceId}' value='${selectedPiece}'>${textContentPiece}</td>`;
                document.getElementById(`${selectedPiece}`).innerHTML = `<td class='${pieceColor}' id='${pieceId}' value='cell'></td>`;
                whiteTurn = false;
                blackTurn = true;
                if (selectedPiece.includes('pawn')) {
                    arrMovedWhitePawnList = [];
                }
                else if (selectedPiece.includes('castle')) {
                    arrMovedWhiteCastleList = [];
                }
                else if (selectedPiece.includes('bishop')) {
                    arrMovedWhiteBishopList = [];
                }
                else if (selectedPiece.includes('knight')) {
                    arrMovedWhiteKnightList = [];
                }
                else {
                    console.log('fail array')
                }
                moveToSquare = null;
                selectedPiece = null;
                textContentPiece = null;
                spaceColor = null;
                spaceId = null;
                spaceValue = null;
                pieceColor = null;
                pieceId = null;
                pieceValue = null;
                whiteTurn = false;
                blackTurn = true;
            }
        }

       
    </script>
 </body>
</html>
